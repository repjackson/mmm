template(name='products')
    .ui.padded.grid
        .row
            if is_frontdesk
                a.ui.big.fluid.button(href='/healthclub')
                    i.left.chevron.grey.icon
                    .ui.inline.grey.header back
            else 
                a.ui.big.fluid.button(href='/')
                    i.left.chevron.grey.icon
                    .ui.inline.grey.header back
        .row
            .four.wide.column
                .ui.header 
                    i.wrench.grey.icon
                    |products
                +shop_cloud
            .twelve.wide.column.scrolling
                .ui.stackable.three.cards
                    each products
                        +product_card_template






template(name='shop_dashboard')
    .ui.stackable.padded.grid
        .three.wide.column
            .ui.header 
                +i name='shop'
                |shop
        //-     .ui.fluid.button.add_item
                i.plus.icon
        //-         |add item
            //- +cloud filter='shop'
        .sixteen.wide.column
            .ui.stackable.grid
                .row
                    .four.wide.column
                        .ui.segment
                            .ui.header 
                                //- i.box.icon
                                |top selling products
                            each top_selling_products
                                +product_header
                                .meta #{sales_total}sales                         
                    .four.wide.column
                        .ui.segment
                            .ui.header 
                                //- i.users.icon
                                |top selling people
                            each top_selling_people
                                img.ui.avatar.rounded.image(src="{{c.url picture width=400 height=400 gravity='face' crop='fill'}}")
                                .ui.inline.small.header #{first_name} #{last_name}
                                .meta #{sales_amount}sales                                                            
                    .four.wide.column
                        .ui.segment
                            .ui.header 
                                //- i.clock.icon
                                |most rented
                            each most_rented
                                +product_header
                                .meta #{sales_amount}sales
                    .four.wide.column
                        .ui.segment
                            .ui.header 
                                //- i.bullhorn.icon
                                |ad
                .row
                    .four.wide.column
                        .ui.segment
                            .ui.header 
                                //- i.cubes.icon
                                |top grossing products
                            each top_grossing_products
                                +product_header
                                .meta #{sales_amount}sales                                
                        
                    .four.wide.column
                        .ui.segment
                            .ui.header 
                                //- i.users.icon
                                |top grossing people
                            each top_grossing_people
                                img.ui.avatar.rounded.image(src="{{c.url picture width=400 height=400 gravity='face' crop='fill'}}")
                                .ui.inline.small.header #{first_name} #{last_name}
                                .meta #{sales_amount}sales                                
                    .four.wide.column
                        .ui.segment
                            .ui.header 
                                //- i.thumbs.up.icon
                                |most liked
                            each top_voted
                                +product_header
                                .meta #{points}pts                                  
                    .four.wide.column
                        .ui.segment
                            .ui.header 
                                //- i.diamond.ring.icon
                                |most expensive rentals
                            each most_expensive_rentals
                                +product_header
                                .meta $#{daily_rate}/day                                  
                .row
                    //- .four.wide.column
                    //-     .ui.segment
                    //-         .ui.header 
                    //-             +ismall name='tags' classes='ui inline image'
                    //-             |top grossing tags
                    //- .four.wide.column
                    //-     .ui.segment
                    //-         .ui.header 
                                i.building.icon
                    //-             |top grossing buildings
                            .ui.icon.button.calculate_top_grossing_buildings 
                                i.refresh.icon
                    .four.wide.column
                        .ui.segment
                            .ui.header 
                                //- i.eye.icon
                                |most viewed
                            each most_viewed
                                +product_header
                                .meta #{reader_count}
                    .four.wide.column
                        .ui.segment
                            .ui.header 
                                //- i.clock.icon
                                |newest products
                            each newest_products
                                +product_header
                                .meta #{when}
                //- .row
                //-     .ui.three.cards
                //-         each products
                //-             .ui.card
                //-                 a(href="/shop/#{_id}/view")
                //-                     img.ui.centered.rounded.image(src="{{c.url picture width=300 height=200 crop='fit'}}")
                //-                 .content 
                //-                     .header #{title}
                //-                     .smallscroll
                //-                         |!{description}
                //-                     unless rentable
                //-                         +add_to_tab
                                    a.ui.basic.icon.button(href="/shop/#{_id}/view")
                //-                         +i name='chevron right' classes='ui mini image'
                //-                     if can_edit
                //-                         a.ui.basic.button(href="/shop/#{_id}/edit")
                //-                             +i name='pencil' classes='ui mini image'

template(name='product_header')
    a(href="/shop/#{_id}/view")
        img.ui.avatar.rounded.image(src="{{c.url picture width=400 height=400 gravity='face' crop='fill'}}")
        .ui.inline.small.header #{title}


template(name='add_to_tab')
    .ui.segment
        .add_to_tab.ui.green.button
            //- i.cart.plus.icon
            |add to tab
        if current_tab_additions
            div current tab additions
            .ui.list
                each current_tab_additions
                    .item
                        |#{when}
                        //- i.remove.link.icon.remove_tab_item

template(name='shop_card_template')
    .ui.fluid.horizontal.card
        a.pointer(href="/shop/#{_id}/view")
            img.ui.centered.rounded.image(src="{{c.url shop_image_id width=300 height=200 crop='fit'}}")
        .content
            a.ui.grey.small.header(href="/shop/#{_id}/view") #{title}
            .ui.inline.header 
                //- i.shop.grey.small.icon
                |$#{dollar_price}
            div
            //- i.grey.marker.icon
            each location_tags
                .ui.small.basic.label #{this}
            a.ui.basic.small.icon.button(href="/shop/#{_id}/view")
                +i name='chevron right' classes='ui mini image'
            
            
template(name='fav_button')
    i.large.link.heart.outline.icon
            
            
template(name='shop_cloud')
    //- #cloud
        //- .ui.left.icon.input
        //-     i.search.icon
        //-     +inputAutocomplete settings=settings id="search" class="" autocomplete="off" 
        // .ui.hidden.fitted.divider
    if selected_shop_tags
        //- #clear_tags.ui.active.icon.tiny.circular.button
        //-     i.remove.icon
        each selected_shop_tags
            .unselect_shop_tag.ui.active.tiny.circular.kiosk_facet_button.button
                strong #{this}
    each all_shop_tags
        .ui.compact.tiny.circular.basic.button.kiosk_facet_button.select_shop_tag(class=cloud_tag_class) 
            strong #{this.name}



template(name='shop_small')
    a.ui.grey.header(href="/m/product")
        //- i.shopping.bag.icon
        +i name='shop' classes='ui tiny inline image'
        | for sale
    //- +shop_cloud
    .ui.relaxed.grey.link.large.list.smallcolumn
        each products 
            a.item(href="/product/#{_id}/view") 
                if image
                    img.ui.mini.inline.image(src="{{c.url image width=300 height=300 gravity='face' crop='fill'}}")
                if picture
                    img.ui.mini.inline.image(src="{{c.url picture width=300 height=300 gravity='face' crop='fill'}}")
                |#{title}
                small #{karma_price}karma
                //- small $#{dollar_price}
    
